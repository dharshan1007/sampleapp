- hosts: localhost
  remote_user: ec2-user
  become: yes
  tasks:
      - name: going to install git 
        yum:
          name: git
          state: present
          update_cache: yes
      - name: going to istall jenkins via yum repository
        yum_repository:
          name: jenkins
          description: jenkins install
          baseurl: http://pkg.jenkins.io/redhat-stable
          gpgkey: http://pkg.jenkins.io/redhat/jenkins.io.key
      - name: going to install java and jenkins
        yum:
          name: "{{ item }}"
          state: present
        loop:
          - java
          - jenkins
      - name: going to start jenkin service
        service:
          name: jenkins
          state: started  
      - name: Install docker.
        package:
            name: docker
            state: present
      - name: Start docker service
        service:
            name: docker
            state: started
      - name: dowload maven binaries
        get_url:
          url: http://mirrors.estointernet.in/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz
          dest: /opt
          mode: '0777'
      - name: unzip the binaries
        unarchive:
          src: /opt/apache-maven-3.6.3-bin.tar.gz
          dest: /opt
          remote_src: yes
          mode: '0777'
